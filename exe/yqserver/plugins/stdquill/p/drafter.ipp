////////////////////////////////////////////////////////////////////////////////
//
//  YOUR QUILL
//
////////////////////////////////////////////////////////////////////////////////

#pragma once

namespace {

    //  -----------------------------------------------------------------------
    //      UTILITIES
    //  -----------------------------------------------------------------------
    
    //  -----------------------------------------------------------------------
    //      REST API
    //  -----------------------------------------------------------------------

    //  -----------------------------------------------------------------------
    //      PAGES
    //  -----------------------------------------------------------------------
    
    //  -----------------------------------------------------------------------
    //      ADMIN
    //  -----------------------------------------------------------------------


    //  -----------------------------------------------------------------------
    //      DEV
    //  -----------------------------------------------------------------------

        void    p_dev_drafter(WebHtml& h)
        {
            Drafter   x = drafter(h);
            if(!x)
                throw HttpStatus::BadArgument;
            auto i = cdb::info(x);
            dev_title(h, x);
            auto ta = h.table();
            h.kvrow("ID") << x.id;
            h.kvrow("Name") << i.name;
            h.kvrow("Key") << i.key;
            h.kvrow("Brief") << i.brief;
            h.kvrow("Document") << dev(i.doc);
        }

        void    p_dev_drafters(WebHtml& out)
        {
            out.title("All Drafters");
            dev_table(out, all_drafters());
        }

    //  -----------------------------------------------------------------------
    //      REGISTRATION
    //  -----------------------------------------------------------------------

        void reg_drafter_pages()
        {
            reg_webpage<p_dev_drafter>("/dev/drafter").local().argument("id", "Drafter id (number)");
            reg_webpage<p_dev_drafters>("/dev/drafters");
        }
}
