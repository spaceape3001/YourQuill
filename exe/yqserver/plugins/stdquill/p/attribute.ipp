////////////////////////////////////////////////////////////////////////////////
//
//  YOUR QUILL
//
////////////////////////////////////////////////////////////////////////////////

#pragma once

namespace {

    //  -----------------------------------------------------------------------
    //      UTILITIES
    //  -----------------------------------------------------------------------

        void    dev_title(WebHtml& h, Attribute x, std::string_view extra=std::string_view())
        {
            auto t = h.title();
            h << "Attribute \"" << name(x) << "\" (" << x.id << " &mdash; " << key(x) << ")";
            if(!extra.empty())
                h << ": " << extra;
        }
        
    //  -----------------------------------------------------------------------
    //      REST API
    //  -----------------------------------------------------------------------

    //  -----------------------------------------------------------------------
    //      PAGES
    //  -----------------------------------------------------------------------
    
    //  -----------------------------------------------------------------------
    //      ADMIN
    //  -----------------------------------------------------------------------

    //  -----------------------------------------------------------------------
    //      DEV
    //  -----------------------------------------------------------------------

        void    p_dev_attribute(WebHtml& h)
        {
            Attribute a = attribute(h);
            if(!a)
                throw HttpStatus::BadArgument;
            h.title() << "Attribute " << a.id;
            auto t = h.table();
            h.kvrow("Atom") << a.id;
            h.kvrow("Field") << dev(field(a));
        }

        void    p_dev_attributes(WebHtml&h)
        {
            h.title() << "All Attributes";
            dev_table(h, all_attributes());
        }

    //  -----------------------------------------------------------------------
    //      REGISTRATION
    //  -----------------------------------------------------------------------

        void reg_attribute_pages()
        {
            reg_webpage<p_dev_attribute>("/dev/attribute");
            reg_webpage<p_dev_attributes>("/dev/attributes");
        }
}
